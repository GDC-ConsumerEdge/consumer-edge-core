---
# vars file for abm-install

# GCP Project to associate with
google_project_id: "{{ lookup('env', 'PROJECT_ID') }}"

# Folder to run installation out of
abm_install_folder: "/var/abm-install"
abm_workspace_folder: "{{ abm_install_folder }}/bmctl-workspace"

# Match with Google-Tools (by convention, not required, but good idea)
remote_gsa_key: "/var/keys"
sshPrivateKeyPath: /root/.ssh/id_rsa

pod_cidr: "192.168.0.0/16"
# TODO: Should this be in the local network address space?
services_1_cidr: "192.168.86.0/12" # 10.96.0.0/12 <-- orig value, new needs to be in VIP range
enable_application_logging_1: false


install_type: standalone



control_plane_ip: [
  "{{ lookup('dig', 'store-1.lan') }}",
  "{{ lookup('dig', 'store-2.lan') }}",
  "{{ lookup('dig', 'store-3.lan') }}",
  "{{ lookup('dig', 'store-4.lan') }}",
  "{{ lookup('dig', 'store-5.lan') }}"
]

# Service Account Configuration
service_accounts: [
  {
    name: abm-gke-connect-agent,
    description: "ABM GKE Connect Agent Service Account",
    roles: [
      "roles/gkehub.connect"
    ]
  },
  {
    name: abm-gcr-agent,
    description: "ABM GCR Agent Account",
    roles: [
      "roles/storage.objectViewer"
    ]
  },
  {
    name: abm-gke-register-agent,
    description: "ABM GKE Connect Register Account",
    roles: [
      "roles/gkehub.admin"
    ]
  },
  {
    name: abm-cloud-operations-agent,
    description: "ABM Cloud Operations Service Account",
    roles: [
      "roles/logging.logWriter",
      "roles/monitoring.metricWriter",
      "roles/stackdriver.resourceMetadata.writer",
      "roles/monitoring.dashboardEditor"
    ]
  }
]
